{
    "name": "ProximityTrigger",
    "script": "ProximityTrigger.js",
    "version": "2.1.0",
    "previousversions": [],
    "description": "# ProximityTrigger\n\nA powerful proximity-based automation system for Roll20 that triggers events when player tokens approach designated areas, NPCs, traps, or other game elements.\n\n## Features\n\n- **Automatic Proximity Detection**: Triggers activate when tokens move within range\n- **Customizable Distances**: Set trigger distances in token body widths\n- **Cooldown System**: Prevent spam with configurable timeouts\n- **Weighted Messages**: Multiple messages with probability weights for variety\n- **Styleable Cards**: Beautiful message cards with customizable colors and whisper modes\n- **Multiple Use Cases**: NPCs, traps, environmental descriptions, passive checks, area effects\n- **Interactive Configuration**: Full chat-based UI for easy setup\n- **Multi-Token Support**: One trigger configuration can apply to multiple tokens\n\n## Basic Usage\n\n1. Place tokens on your map (NPCs, traps, environmental markers, etc.)\n2. Use `!pt --monitor` or `!pt -M` to start monitoring a token\n3. Configure trigger distance, timeout, messages, and styling\n4. When player tokens move within range, triggers activate automatically\n\n## Commands\n\n### Main Commands\n\n- `!pt --help` or `!pt -h` - Display help menu\n- `!pt --menu` or `!pt -m` - Open interactive menu\n- `!pt --monitor [Token/Name]` or `!pt -M [Token/Name]` - Add/edit a trigger\n- `!pt --list` or `!pt -l` - List all monitored triggers\n- `!pt --delete [Name]` or `!pt -D [Name]` - Delete a trigger\n- `!pt --trigger [Token/Name]` or `!pt -t [Token/Name]` - Manually activate a trigger\n\n### Configuration Commands\n\n- `!pt --edit [Name] [property] [value]` or `!pt -e [Name] [property] [value]` - Edit trigger properties\n  - Properties: `triggerDistance`, `timeout`, `img`, `cardStyle`, `mode`\n- `!pt --cardstyles` or `!pt -cl` - List all card styles\n- `!pt --cardstyle [StyleName] [property] [value]` or `!pt -C [StyleName] [property] [value]` - Edit/create card styles\n\n### Trigger Modes\n\n- `on` - Trigger activates every time (respecting timeout)\n- `off` - Trigger is disabled\n- `once` - Trigger activates once, then automatically switches to off\n\n## Example Workflows\n\n### Setting Up an NPC\n\n1. Select the NPC token on the map\n2. Type: `!pt -M`\n3. Click \"Trigger Distance\" and set to desired range (e.g., 2 token widths)\n4. Click \"Messages\" to add dialogue\n5. Add multiple messages with different weights for variety\n\n### Creating a Trap Warning\n\n1. Place a token representing the trap trigger zone\n2. Type: `!pt -M Trap_Warning`\n3. Set mode to \"once\" so it only triggers once\n4. Add a message like \"You notice something suspicious about the floor...\"\n5. Set whisper mode to \"gm\" if you want only the GM to see it\n\n### Environmental Description\n\n1. Place marker tokens at key locations\n2. Monitor each with `!pt -M`\n3. Add atmospheric descriptions\n4. Use multiple messages with weights for variety\n\n## Message Features\n\n- **Placeholders**: Use `{playerName}` in messages to personalize them\n- **Weights**: Higher weight = more likely to appear (0 = disabled)\n- **Per-Message Styles**: Override the default card style for specific messages\n- **Multiple Messages**: Add variety with different possible messages per trigger\n\n## Card Styles\n\n Customize the appearance of your trigger messages:\n\n- **Border Color**: Frame color for the message card\n- **Background Color**: Card background color\n- **Bubble Color**: Speech bubble interior color\n- **Text Color**: Message text color\n- **Whisper Mode**: `off` (public), `character` (whisper to triggering player), or `gm` (whisper to GM)\n\nCreate multiple styles for different types of triggers (friendly NPCs, hostile encounters, traps, environment, etc.)\n\n## Technical Details\n\n- Trigger distance is measured in token body widths from token center\n- Timeout of 0 means the trigger will only fire once per token until manually reset\n- Positive timeout values (in milliseconds) create a cooldown period\n- State persists between game sessions\n- Multiple tokens can share the same trigger configuration\n- Tokens are automatically added/removed from triggers when placed/deleted\n\n## Use Cases\n\n- **Interactive NPCs**: Greetings, dialogue, reactions\n- **Traps & Hazards**: Warnings, passive perception checks\n- **Environmental Storytelling**: Room descriptions, atmosphere\n- **Quest Markers**: Area discovery notifications\n- **Passive Checks**: Automatic skill check notifications\n- **Dynamic Events**: Triggered by player proximity\n\n## Notes\n\n- Use underscores for spaces in token names when typing commands\n- Select tokens before using `-M` flag for quick setup\n- The Default card style cannot be edited or deleted\n- Triggers automatically track all tokens with matching names\n\n## Version History\n\n### 2.1.0\n- Full release with comprehensive feature set\n- Multi-token support per trigger\n- Message management system\n- Card style customization\n- Three trigger modes (on/off/once)\n- Interactive chat-based configuration\n\n### 2.0.0\n- Major refactor and feature additions\n- Added card styles\n- Improved message system\n\n### 1.0.0\n- Initial release\n- Basic proximity detection\n- Simple message display",
    "authors": "Brandon B.",
    "roll20userid": "8312627",
    "useroptions": [],
    "dependencies": [],
    "modifies": {
        "state.ProximityTrigger": "read,write",
        "graphic": "read",
        "graphic.left": "read",
        "graphic.top": "read",
        "graphic.width": "read",
        "graphic.height": "read",
        "graphic.pageid": "read",
        "graphic.represents": "read",
        "graphic.imgsrc": "read",
        "graphic.name": "read",
        "graphic.layer": "read",
        "character": "read",
        "character.name": "read",
        "character.avatar": "read"
    },
    "conflicts": []
}